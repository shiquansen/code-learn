- 先更新数据库，再更新缓存      （线程的 ABBA 双更非顺序执行）
        线程A更新了数据库
        线程B更新了数据库
        线程B更新了缓存
        线程A更新了缓存（产生脏数据）
- 先删除缓存，再更新数据库       （线程的 ABBA 先删再更 非顺序执行）
        请求A进行写操作，删除缓存
        请求B查询发现缓存不存在
        请求B去数据库查询得到旧值
        请求B将旧值写入缓存
        请求A将新值写入数据库
        
```
    //延时双删
    public void write(String key, Object data) {
        redis.delKey(key);
        db.updateData(data);
        Thread.sleep(1000);
        redis.delKey(key);
    }
```
- 先更新数据库，再删除缓存 《Cache-Aside pattern》
    失效：应用程序先从cache取数据，没有得到，则从数据库中取数据，成功后，放到缓存中。
    命中：应用程序从cache中取数据，取到后返回。
    更新：先把数据存到数据库中，成功后，再让缓存失效。
    
    缓存刚好失效
    请求A查询数据库，得一个旧值
    请求B将新值写入数据库
    请求B删除缓存
    请求A将查到的旧值写入缓存
        